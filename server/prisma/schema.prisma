generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model ca_lam_viec {
  ma_nv         String   @db.VarChar(10)
  ca_lam_viec   String   @db.VarChar(100)
  ngay_lam      DateTime @db.Date
  thoi_gian_lam Int?     @default(8)

  @@id([ma_nv, ca_lam_viec, ngay_lam])
}

model ca_nhan {
  cccd  String  @id @db.VarChar(15)
  ten   String? @db.VarChar(50)
  email String? @db.VarChar(50)
  sdt   String? @db.VarChar(10)
}

model cap_do {
  cap         Int     @id @default(autoincrement())
  so_diem_can Int?
  ten_cap_do  String? @db.VarChar(20)
}

model dien_vien {
  ma_phim   String @db.VarChar(10)
  dien_vien String @db.VarChar(50)

  @@id([ma_phim, dien_vien])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model do_an_thuc_uong {
  ma_sp                String  @id @db.VarChar(10)
  ten                  String? @db.VarChar(100)
  kich_co              Int?
  gia_tien             Int?
  ma_nhan_vien_phuc_vu String  @db.VarChar(10)
  ma_khach_hang        String? @db.VarChar(10)

  @@index([ma_khach_hang], map: "ma_khach_hang")
  @@index([ma_nhan_vien_phuc_vu], map: "ma_nhan_vien_phuc_vu")
}

model don_vi_to_chuc {
  ma_so_rieng String @id @db.VarChar(10)
}

model ghe {
  ma_rap   String @db.VarChar(10)
  ma_phong String @db.VarChar(10)
  ma_ghe   String @db.VarChar(3)
  loai_ghe String @db.VarChar(10)

  @@id([ma_rap, ma_phong, ma_ghe])
}

model hoa_don {
  ma_hoa_don             String    @id @db.VarChar(10)
  trang_thai_thanh_toan  Boolean
  thoi_gian              DateTime? @db.DateTime(0)
  phuong_thuc_thanh_toan String?   @db.VarChar(20)
  ma_nhan_vien_phu_trach String?   @db.VarChar(10)
  ma_khach_hang          String?   @db.VarChar(10)
  ma_km                  String?   @db.VarChar(10)
  tong_tien              Int?      @default(0)

  @@index([ma_khach_hang], map: "ma_khach_hang")
  @@index([ma_km], map: "ma_km")
  @@index([ma_nhan_vien_phu_trach], map: "ma_nhan_vien_phu_trach")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model hoa_don_bao_gom_do_an_thuc_uong {
  ma_hoa_don         String @db.VarChar(10)
  ma_do_an_thuc_uong String @db.VarChar(10)
  so_luong           Int?

  @@id([ma_hoa_don, ma_do_an_thuc_uong])
  @@index([ma_do_an_thuc_uong], map: "ma_do_an_thuc_uong")
}

model khach_hang {
  ma_khach_hang String  @id @db.VarChar(10)
  ten           String? @db.VarChar(50)
  sdt           String? @db.VarChar(10)
  gioi_tinh     String? @db.VarChar(3)
  email         String? @db.VarChar(100)
}

model khuyen_mai {
  ma_km              String   @id @db.VarChar(10)
  ten_km             String?  @db.VarChar(50)
  loai_km            String?  @db.VarChar(50)
  thoi_gian_bat_dau  DateTime @db.Date
  thoi_gian_ket_thuc DateTime @db.Date
  gia_tri            Int?
  ma_nv_quan_ly      String?  @db.VarChar(10)

  @@index([ma_nv_quan_ly], map: "ma_nv_quan_ly")
}

model khuyen_mai_quy_doi {
  ma_km String @id @db.VarChar(10)
}

model khuyen_mai_toan_rap {
  ma_km String @id @db.VarChar(10)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model nhan_vien {
  ma_nv         String    @id @db.VarChar(10)
  ten           String?   @db.VarChar(50)
  cccd          String    @db.VarChar(15)
  sdt           String?   @db.VarChar(10)
  ngay_sinh     DateTime? @db.Date
  gioi_tinh     String?   @db.VarChar(3)
  luong         Int?
  chuc_vu       String?   @db.VarChar(50)
  dia_chi       String?   @db.VarChar(100)
  ma_nv_quan_ly String?   @db.VarChar(10)
  ma_rap_phim   String    @db.VarChar(10)

  @@index([ma_nv_quan_ly], map: "fk_nv_quan_ly")
  @@index([ma_rap_phim], map: "ma_rap_phim")
}

model nhan_vien_ban_hang {
  ma_nv String @id @db.VarChar(10)
}

model phim {
  ma_phim              String    @id @db.VarChar(10)
  ten_phim             String?   @db.VarChar(100)
  thoi_luong           DateTime? @db.Time(0)
  do_tuoi_yeu_cau      Int?      @default(3)
  thoi_gian_cong_chieu DateTime? @db.Date
  tom_tat_noi_dung     String?   @db.VarChar(1000)
  dao_dien             String?   @db.VarChar(50)
}

model phong_chieu_phim {
  ma_rap   String @db.VarChar(10)
  ma_phong String @db.VarChar(10)
  so_ghe   Int?   @default(0)

  @@id([ma_rap, ma_phong])
}

model quan_tri_vien {
  ma_nv String @id @db.VarChar(10)
}

model quy_doi_khuyen_mai {
  ma_km         String @db.VarChar(10)
  ma_khach_hang String @db.VarChar(10)
  ten_tai_khoan String @db.VarChar(50)

  @@id([ma_km, ma_khach_hang, ten_tai_khoan])
  @@index([ten_tai_khoan, ma_khach_hang], map: "ten_tai_khoan")
}

model rap_phim {
  ma_rap   String  @id @db.VarChar(10)
  ten      String? @db.VarChar(100)
  dia_chi  String? @db.VarChar(255)
  sdt      String? @db.VarChar(10)
  so_phong Int?    @default(0)
}

model rap_phim_ap_dung_khuyen_mai {
  ma_rap_phim String @db.VarChar(10)
  ma_km       String @db.VarChar(10)

  @@id([ma_rap_phim, ma_km])
  @@index([ma_km], map: "ma_km")
}

model su_kien {
  ma_sk            String    @id @db.VarChar(10)
  ten_sk           String?   @db.VarChar(50)
  quy_mo           String?   @db.VarChar(20)
  do_tuoi_gioi_han Int?
  chi_phi          Int?
  thoi_gian        DateTime? @db.DateTime(0)
  noi_dung_su_kien String?   @db.VarChar(1000)
}

model suat_chieu {
  ma_luot_chieu          String    @id @db.VarChar(10)
  thoi_gian_bat_dau      DateTime? @db.DateTime(0)
  thoi_gian_ket_thuc     DateTime? @db.DateTime(0)
  hinh_thuc_chieu        String?   @db.VarChar(10)
  ngon_ngu               String?   @db.VarChar(20)
  phu_de_hoac_long_tieng String?   @db.VarChar(10)
  ma_phim                String    @db.VarChar(10)
  ma_rap                 String    @db.VarChar(10)
  ma_phong_chieu         String    @db.VarChar(10)
  ma_nhan_vien_quan_ly   String    @db.VarChar(10)

  @@index([ma_nhan_vien_quan_ly], map: "ma_nhan_vien_quan_ly")
  @@index([ma_phim], map: "ma_phim")
  @@index([ma_rap, ma_phong_chieu], map: "ma_rap")
}

model tai_khoan_khach_hang {
  ten_tai_khoan       String  @db.VarChar(50)
  ma_khach_hang       String  @db.VarChar(10)
  mat_khau            String? @db.VarChar(50)
  cap                 Int?    @default(0)
  so_diem_tich_duoc   Int?    @default(0)
  so_diem_can_len_cap Int?

  @@id([ten_tai_khoan, ma_khach_hang])
  @@index([cap], map: "cap")
  @@index([ma_khach_hang], map: "ma_khach_hang")
}

model the_loai {
  ma_phim  String @db.VarChar(10)
  the_loai String @db.VarChar(100)

  @@id([ma_phim, the_loai])
}

model to_chuc {
  ma_so_rieng String  @id @db.VarChar(10)
  ten_to_chuc String? @db.VarChar(50)
  email       String? @db.VarChar(50)
  sdt         String? @db.VarChar(10)
}

model to_chuc_su_kien {
  ma_don_vi_to_chuc String @db.VarChar(10)
  ma_su_kien        String @db.VarChar(10)
  ma_rap_phim       String @db.VarChar(10)
  ma_phong_phim     String @db.VarChar(10)

  @@id([ma_rap_phim, ma_don_vi_to_chuc, ma_su_kien])
  @@index([ma_don_vi_to_chuc], map: "ma_don_vi_to_chuc")
  @@index([ma_su_kien], map: "ma_su_kien")
}

model ve {
  ma_ve                String    @id @db.VarChar(10)
  gia_ve               Int?
  ma_rap               String    @db.VarChar(10)
  ma_phong             String    @db.VarChar(10)
  ma_ghe               String    @db.VarChar(3)
  ma_luot_chieu        String    @db.VarChar(10)
  ma_hoa_don           String    @db.VarChar(10)
  ma_nhan_vien_ban_ve  String    @db.VarChar(10)
  thoi_gian_thanh_toan DateTime? @db.DateTime(0)
  ma_khach_hang        String?   @db.VarChar(10)

  @@index([ma_hoa_don], map: "ma_hoa_don")
  @@index([ma_khach_hang], map: "ma_khach_hang")
  @@index([ma_luot_chieu], map: "ma_luot_chieu")
  @@index([ma_nhan_vien_ban_ve], map: "ma_nhan_vien_ban_ve")
  @@index([ma_rap, ma_phong, ma_ghe], map: "ma_rap")
}
